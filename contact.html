<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact Us • Alam Tour</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-wrap">
      <a class="brand" href="index.html">Alam Tour</a>
      <nav class="nav">
        <a class="nav-link" href="index.html">Beranda</a>
        <a class="nav-link" href="contact.html">Contact Us</a>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="container hero-wrap">
      <h1>Hubungi Kami</h1>
      <p>Tim kami siap membantu merencanakan liburan alam terbaik Anda.</p>
    </div>
  </section>

  <main class="container">
    <section class="grid grid-2" style="padding:24px 0">
      <article class="card">
        <div class="content" style="gap:12px">
          <div class="title">Kontak Langsung</div>
          <div class="meta">Hubungi via WhatsApp atau email, kami responsif.</div>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <a id="btn-wa-direct" class="btn btn-wa" href="#" target="_blank" rel="noopener">WhatsApp</a>
            <a class="btn" id="btn-email" href="mailto:?subject=Pertanyaan%20untuk%20Alam%20Tour" target="_blank" rel="noopener">Email</a>
          </div>
          <div class="list">
            <div class="meta">Jam operasional: 09.00–18.00 WIB</div>
            <div class="meta">Nomor WhatsApp: <span id="wa-number-view">-</span></div>
          </div>
        </div>
      </article>
      <article class="card">
        <div class="content content-lg">
          <div class="title">Form Kontak</div>
          <form id="contact-form">
            <input id="f-name" class="field" placeholder="Nama" required />
            <input id="f-email" class="field" type="email" placeholder="Email" />
            <input id="f-phone" class="field" placeholder="Nomor WhatsApp" />
            <textarea id="f-message" class="field" placeholder="Pesan" rows="5" required></textarea>
            <div style="display:flex;gap:10px;flex-wrap:wrap">
              <button class="btn" type="submit">Kirim Pesan</button>
            </div>
          </form>
        </div>
      </article>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-wrap">
      <span>© <span id="year"></span> Alam Tour</span>
      <a class="footer-link" href="https://github.com/" target="_blank" rel="noopener">Hosting: GitHub Pages</a>
    </div>
  </footer>

  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script src="db.js"></script>
  <script>
    const yearEl=document.getElementById('year');
    const btnWa=document.getElementById('btn-wa-direct');
    const waView=document.getElementById('wa-number-view');
    const form=document.getElementById('contact-form');
    yearEl.textContent=new Date().getFullYear();
    let waNumber=null;
    function normalizeWa(n){if(!n)return null;let d=String(n).trim().replace(/[^\d]/g,'');if(!d)return null;if(d.startsWith('0')){d='62'+d.slice(1);}else if(d.startsWith('62')){d=d;}else if(d.startsWith('8')){d='62'+d;}else{d='62'+d;}return d;}
    if(window.db&&window.db.available){window.db.subscribeSettings(s=>{const n=normalizeWa(s&&s.whatsapp_number)||null;waNumber=n;waView.textContent=n?('+'+n):'-';if(n){btnWa.href=`https://wa.me/${n}`;}else{btnWa.href='#';}});} 
    form.addEventListener('submit',function(e){e.preventDefault();const name=(document.getElementById('f-name').value||'').trim();const email=(document.getElementById('f-email').value||'').trim();const phone=(document.getElementById('f-phone').value||'').trim();const message=(document.getElementById('f-message').value||'').trim();const body=`Halo, saya ${name}.\n${message}\nEmail: ${email||'-'}\nWA: ${phone||'-'}`;if(waNumber){window.open(`https://wa.me/${waNumber}?text=${encodeURIComponent(body)}`,'_blank');}else{window.open(`mailto:?subject=Pesan%20untuk%20Alam%20Tour&body=${encodeURIComponent(body)}`,'_blank');}});
  </script>
</body>
</html>